import { useForm } from "react-hook-form";
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from "yup";
import { Navbar } from "../Components/Navbar"
import { Inputbox } from '../Components/Inputbox';
import { useRef } from "react";

const schema = yup.object({
    customername: yup.string().required(),
    loandDate: yup.date().required(),
    loandValue: yup.number().required(),
    bikeNumber: yup.string().required(),
    guarenteesName1: yup.string().required(),
    guarenteesTele1: yup.number().required(),
    guarenteesName2: yup.string().required(),
    guarenteesTele2: yup.number().required(),
    branchLocation: yup.string().required(),
  }).required();

  type LoanFormData = yup.InferType<typeof schema>;

const AddNewLoans = () => {
    const { register, handleSubmit, formState: { errors } } = useForm<LoanFormData>({
        resolver: yupResolver(schema)
    });

    const inputRef = useRef<HTMLInputElement>(null);

    const onSubmit = (data: LoanFormData) => {
        if (inputRef.current) {
            inputRef.current.focus();
          }
        console.log(data)
    }
  return (
    <div>
        <Navbar/>
        <form onSubmit={handleSubmit(onSubmit)} className="flex flex-col gap-3 mx-28 mt-7 " >
        <div>
            <h1 className="text-white text-4xl mb-6">Add New Loans</h1>
            <hr  className="mb-5"/>
        </div>
        <div className="flex flex-row gap-12">
        <div>
            <Inputbox 
            label='Customer name'
            placeholder='Enter your customer name'
            className="bg-[#292929] w-[648px] h-[42px] rounded-xl  
            placeholder:text-[13.71px] placeholder:pl-3 mb-3 placeholder:text-gray-400 focus:text-white "
            {...register("customername")}
            type='text'
            ref={inputRef}
            />
            {errors.customername && <p className='text-red-500 text-sm m-0'>{'*' + errors.customername?.message}</p>}
        </div>
        <div>
            <Inputbox 
            label='Branch Location'
            placeholder='Enter your branch location'
            {...register("branchLocation")}
            type='text'
            ref={inputRef}
            />
            {errors.branchLocation && <p className='text-red-500 text-sm'>{'*' + errors.branchLocation?.message}</p>}
        </div>
        </div>
        <div className="flex flex-row gap-12">
        <div>
            <Inputbox 
            label='Loaned Date'
            placeholder='Enter your loan given date'
            {...register("loandDate")}
            type='text'
            ref={inputRef}
            />
            {errors.loandDate && <p className='text-red-500 text-sm'>{'*' +errors.loandDate?.message}</p>}
        </div>
        <div>
            <Inputbox 
            label='Loaned Value'
            placeholder='Enter loaned value'
            {...register("loandValue")}
            type='text'
            ref={inputRef}
            />
            {errors.loandValue && <p className='text-red-500 text-sm'>{'*' +errors.loandValue?.message}</p>}
        </div>
        </div>
        <div>
            <Inputbox 
            label='Bike Number'
            placeholder='Enter bike number'
            {...register("bikeNumber")}
            type='text'
            ref={inputRef}
            />
            {errors.bikeNumber && <p className='text-red-500 text-sm'>{'*' +errors.bikeNumber?.message}</p>}
        </div>
        <div>
         <div>
            <p className="text-white">First Guarentee</p></div>
        </div>
        <div className="flex flex-row gap-12">
        <div>
            <Inputbox 
            label='Name'
            placeholder='Enter first guarentees name'
            {...register("guarenteesName1")}
            type='text'
            ref={inputRef}
            />
            {errors.guarenteesName1 && <p className='text-red-500 text-sm'>{'*' +errors.guarenteesName1?.message}</p>}
        </div>
        <div>
            <Inputbox 
            label=' phone number'
            placeholder='Enter first guarentees phone number'
            {...register("guarenteesTele1")}
            type='text'
            ref={inputRef}
            />
            {errors.guarenteesTele1 && <p className='text-red-500 text-sm'>{'*' +errors.guarenteesTele1?.message}</p>}
        </div>
        </div>
        <div  className="flex flex-row">
            <p className="text-white">Second Guarentee</p>
            {/* <div className="text-white border h-0 w-normla-width my-auto ml-4 left-0 right-0 border-white"></div> */}
        </div>
        <div className=" flex flex-row justify-between">
        <div className="flex flex-row gap-12">
        <div>
            <Inputbox 
            label='Name'
            placeholder='Enter second guarentees name'
            {...register("guarenteesName2")}
            type='text'
            ref={inputRef}
            />
            {errors.guarenteesName2 && <p className='text-red-500 text-sm'>{'*' +errors.guarenteesName2?.message}</p>}
        </div>
        <div>
            <Inputbox 
            label=' phone number'
            placeholder='Enter second guarentees phone number'
            {...register("guarenteesTele2")}
            type='text'
            ref={inputRef}
            />
            {errors.guarenteesTele2 && <p className='text-red-500 text-sm'>{'*' +errors.guarenteesTele2?.message}</p>}
        </div>
        </div>
        <button type="submit" className='text-[15.42px] text-matt-gray font-bold h-[42px] p-2 w-normla-width -bg-hasaru-yellow rounded-xl mt-5'>Add New Loan</button>
        </div>
    </form>
        
    </div>
  )
}

export default AddNewLoans